# CI/CD Pipeline для проекта SimpleBashUtils

Проект представляет собой настройку базового CI/CD пайплайна для утилит `cat` и `grep`.
Реализованы автоматические сборка, тестирование и деплой на удаленный сервер с использованием GitLab CI/CD.

---

## Что было выполнено

### 1. Настройка GitLab Runner
- Развернута виртуальная машина **Ubuntu Server 22.04 LTS**.
- Установлен и зарегистрирован **gitlab-runner** для проекта.
- Runner настроен для выполнения задач в среде GitLab CI/CD.

### 2. Этапы CI/CD Pipeline
#### Сборка (Build)
- Запуск сборки через `Makefile` проекта.
- Артефакты (бинарные файлы `s21_cat` и `s21_grep`) сохраняются на 30 дней.

#### Тест кодстайла (CodeStyle Check)
- Проверка стиля кода с помощью `clang-format`.
- Пайплайн завершается с ошибкой при несоответствии стилю.
- Вывод утилиты отображается в логах GitLab.

#### Интеграционные тесты (Integration Tests)
- Запуск тестов проекта.
- Этап выполняется только при успешной сборке и проверке кодстайла.
- Результаты тестов выводятся в логах.

#### Деплой (Deploy)
- Развертывание артефактов на второй виртуальной машине **Ubuntu Server 22.04 LTS**.
- Используется bash-скрипт для копирования файлов через `scp` и выполнения команд через `ssh`.
- Этап запускается вручную после успешного прохождения всех предыдущих этапов.

### 3. Уведомления в Telegram
- Настроен бот для отправки статуса пайплайна (успех/ошибка CI и CD).
- Уведомления включают информацию о этапах и ссылку на пайплайн.

---

## Инструменты и технологии
- **GitLab CI/CD** — автоматизация процессов.
- **GitLab Runner** — выполнение задач пайплайна.
- **Bash** — написание скриптов для сборки и деплоя.
- **Clang-Format** — проверка стиля кода.
- **SSH/SCP** — безопасное копирование файлов и удаленное управление.
- **Make** — управление сборкой проекта.
- **Telegram Bot API** — отправка уведомлений.

---

## Как это работает


1. **Сборка**: 
   - Запускается при каждом коммите в репозиторий.
   - Генерирует исполняемые файлы, сохраняет их как артефакты.

2. **Тестирование**:
   - Проверка кодстайла гарантирует соответствие стандартам.
   - Интеграционные тесты проверяют функциональность утилит.

3. **Деплой**:
   - После ручного подтверждения артефакты копируются на продакшн-сервер.
   - Скрипт деплоя:
     ```bash
     scp -r $BUILD_ARTIFACTS user@production-server:/tmp/
     ssh user@production-server "sudo mv /tmp/s21_c* /usr/local/bin/"
     ```

---

## Инструкция по развертыванию

### Требования
- Две виртуальные машины с Ubuntu 22.04:
  - **Runner VM**: Для GitLab Runner.
  - **Production VM**: Для деплоя.

### Шаги
1. **Установка GitLab Runner**:
   ```bash
   curl -L "https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh" | sudo bash
   sudo apt-get install gitlab-runner
   sudo gitlab-runner register --url $GITLAB_URL --token $REGISTRATION_TOKEN